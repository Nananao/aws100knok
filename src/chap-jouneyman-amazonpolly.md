---
class: chapter
---

# Amazon Polly 音声合成チューニング入門

<div class="flush-right">
Journeyman(Takeki Oizumi)
</div>

<br>
Journeyman(ジャーニーマン @beajourneyman)です。長いので"ジャニ"と呼ばれています。


業務で Amazon Polly のプロダクション向け音声を合成しています。音声合成チューニングの勘所についてデモを交えて登壇しています。エッセンスを読み物としてまとめます。

## Amazon Polly とは
深層学習(ディープラーニング)を使用したAWSのAI 音声ジェネレーター(テキスト読み上げサービス)です。複数言語に対応しており、日本語にも対応しています。合成音声にはそれぞれ“人名“がついていて、声色が異なるいくつかの男性・女性のバージョンが存在します。
[Amazon Polly - AI 音声ジェネレーター](https://aws.amazon.com/jp/polly/)

ただ「日本語は、その筆記体系の複雑さのために、TTS システムに多くの課題をもたらす言語です。」と以下のブログにある通り、日本語は、Polly にとって非常に扱うコトが難しい言語です。古いですが充実した公式解説ブログがあるのでご紹介します。プロダクションで音声合成チューニングをされる方は必読の内容です。是非、ご覧ください。
[Amazon Polly を使用した日本語テキスト読み上げの最適化](https://aws.amazon.com/jp/blogs/news/optimizing-japanese-text-to-speech-with-amazon-polly/)

### 音声エンジンの種類とチューニングなし音声
音声エンジンの種類をご紹介します。Amazon Polly 全体では4種類ありますが、日本語は「スタンダート」と「ニューラル」の2種類だけ一般提供(GA)されています。英語や一部の言語ではすでに「ロングフォーム」と「生成」がリリースされており、実際に聞くと非常に優れた性能を発揮します。日本語の登場が待ち遠しいです。

* スタンダート：自然な音声を生成します。
* ニューラル：スタンダードエンジンよりも自然で人間に近い音声を生成します。
* ロングフォーム：長時間のコンテンツのために、極めて自然な音声を生成します。
* 生成：生成 AI を使用して、最も表現力豊かで適応性の高い音声を生成します。

スタンダード音声のデモをご紹介します。マネージメントコンソールで「自然な」と紹介されていますが、新しくリリースされる度、音声の性能は飛躍的に上がっており、ロボット音声という印象です。デモでご確認ください。
[Amazon Polly スタンダード音声デモ](https://note.com/beajourneyman/n/naf66ef1597f9)

与えているテキストメッセージはこちらです。

> おやかたプロジェクトプレゼンツ「ぼくのAWSの推しポイント100本ノック」出版おめでとうございます！

続いて”チューニングしていない”ニューラル音声です。お聞きください。

[Amazon Polly ニューラル音声チューニング前デモ](https://note.com/beajourneyman/n/n48dd22884e67)

いかがでしょうか？ チューニングの必要性をご理解いただけていると幸いです。

### サービスごとの特徴を覚える音声合成チューニング手法とチューニングした音声

音声合成マークアップ言語(SSML:Speech Synthesis Markup Language)によるチューニングを行います。ピッチ、発音、読み上げ速度、音量などのテキスト読み上げの出力属性を微調整するために使用できる XML ベースのマークアップ言語です。以下に、サポートされているタグがまとまっています。
[サポートされている SSML タグ](https://docs.aws.amazon.com/ja_jp/polly/latest/dg/supportedtags.html)

プロダクションレベルで頻出のタグは以下の3つです。お客様納品している合成音声もこちらで実装しています。※小文字の＜がマークダウン記法だと表の中で干渉するので、半角スペースを入れていますが、SSMLを書く際は不要です。

| タグ | 用途 | ユースケース |
| :-- | :-- | :-- |
| < break time="0.1s"/> | ブレイク(間)を入れる。 | 連続で話すコトで不自然に感じてしまうケースで非常に有効。0.05秒などコンマ2単位でチューニングする。 |
| < p>< /p> | 明確に文章の区切りを入れる。 | 区切りを入れないと、人間だと息継ぎをしているようなケースも一気に発話してしまい。違和感になる。 |
| < phoneme alphabet="x-amazon-pron-kana" ph="オヘ'ンロ">お遍路</phoneme> | 読み上げを制御する。アクセントを入れられる。 | タグ名は"フォネーム"と読んでいる。漢字読み上げ、イントネーションを制御できる。尚、標準語・関西弁などの指定はできない。 |

では、実際にチューニングした音声をお聞きください。
[Amazon Polly ニューラル音声チューニング後デモ](https://note.com/beajourneyman/n/n39fdbecf7ac1)

意図した読み上げになりました。与えているSSMLは以下の通りです。コンソールの「入力テキスト」欄にの右の切替でSSMLにして、以下のコードをペーストするとお試しいただけます。

```SSML
<speak>
<phoneme alphabet="x-amazon-pron-kana" ph="オヤカタ'">おやかた</phoneme>プロジェクト
<phoneme alphabet="x-amazon-pron-kana" ph="プレ'ゼンツ">プレゼンツ</phoneme><break time="0.05s"/>
<p>「ぼくのAWSの推しポイント100本ノック」、</p>
出版おめでとうございます！
</speak>
```

ご紹介したブレーク、区切り、読み上げ(フォネーム)を駆使して実装しています。このように日本語はアルファベット、ひらがな、カタカナ、漢字、そして同一漢字でも読み上げが違う、同じ表音でもイントネーションが異なるなど、読み上げにとってもは非常に複雑な体系になっています。良かったら、実際に Amazon Polly を触って試してみてください。

### 関連ブログのご紹介
Amazon Polly で音声合成して Amazon Connect の音声プロンプトを実装する際に都度調べたりする手間を省くために備忘録をまとめてあります。滅多に日本語のアップデートがないため、更新チャンスがあまりありません。
[Amazon Polly と SSML(音声合成マークアップ言語)に関する備忘録](https://qiita.com/beajourneyman/items/047fe1da0411d05e1799)

プロジェクト管理視点で、音声合成案件の見積について標準化した工夫ポイントをまとめています。
[Amazon Polly 音声生成のプロジェクト管理面で工夫したコト](https://qiita.com/beajourneyman/items/14a86305b97a0b653a58)

## まとめ

* Amazon Polly にとって日本語の読み上げは難しくチューニングが肝
* プロダクションレベルで必要なSSMLタグは3つ
* 実音声を聞いて行う微調整が非常に重要

Amazon Polly の音声合成チューニング入門をご紹介しました。デモを掲載したので、違いを聞きくらべて体感いただけると嬉しいです。ご参考になれば幸いです。

#### 著者紹介
---

<div class="author-profile">
    <img src="images/journeyman.jpg" width="20%">
    <div>
            <b>Journeyman(Takeki Oizumi)</b>
    </div>
</div>
<p style="margin-top: 0.5em; margin-bottom: 2em;">
Amazon Connect を基盤としたIVRシステムの開発維持保守業務に従事。 Amazon Polly を業務で使用しており、日本語の音声チューニングの必要性を実感し、早くチューニングが要らなくなる世界が訪れるコトを期待している。2025年の AWS Community Builder プログラムで AI Engineering カテゴリーで選出。JAWS-UG栃木支部発起人。
SNSは ＠beajourneyman
</p>